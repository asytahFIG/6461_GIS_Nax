{% load leaflet_tags %}
<head>
    {% leaflet_js %}
    {% leaflet_css %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
</head>
<body>
    <div id="skiDomain" style="width: 100%; height: 100%">
        {% leaflet_map "skiDomain" callback="main_map_init" %}
        <script type="text/javascript">
            // init map at a certain position and zoom
            function main_map_init (map, options) {
                map.setView([46.226485, 7.424843], 15);
                // add a marker
                var marker = L.marker([46.226485, 7.424843]).addTo(map);
                marker.bindPopup("Nax Mont-Noble");

                var dataUrlSkiSlope='{% url "skiSlopejson" %}'
                $.getJSON(dataUrlSkiSlope, function (data) {
                    L.geoJson(data, {onEachFeature: onEachFeature}).addTo(map); });

                var dataUrlForest='{% url "forestsjson" %}'
                $.getJSON(dataUrlForest, function (data) {
                    L.geoJson(data, {onEachFeature: onEachFeature}).addTo(map); });
            }
            
            function onEachFeature(feature, layer) {
            if(feature.properties && feature.properties.name) {
                layer.bindPopup(feature.properties.name);
            }
        }
        </script>
    </div>
</body>